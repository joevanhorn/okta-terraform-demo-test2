# Import Data Directory

This directory contains raw JSON exports from the Okta API, generated by import workflows.

## Purpose

These files serve as:
- **Audit trail** - Historical snapshots of OIG resource configurations
- **Debugging reference** - Raw API responses for troubleshooting
- **Import source** - Data used to generate Terraform configurations

## Files

### `entitlements.json`
Raw API response containing all entitlement bundle definitions from Okta.

**Generated by:** `import-all-resources.yml` workflow
**Size:** ~55KB
**Updates:** When import workflow runs

### `reviews.json`
Raw API response containing all access review campaign definitions from Okta.

**Generated by:** `import-all-resources.yml` workflow
**Size:** ~286KB
**Updates:** When import workflow runs

## ⚠️ Important Security Notice

### NOT Recommended for Production or Customer Environments

**These JSON files may contain sensitive information:**
- Resource identifiers (ORNs, IDs)
- Configuration details
- Organizational structure
- User/group associations (in some cases)

**For production or customer environments:**

❌ **Do NOT commit these files to Git**

Instead:
1. **Add to `.gitignore`:**
   ```gitignore
   environments/*/imports/*.json
   ```

2. **Store as workflow artifacts:**
   - Import workflows already upload as artifacts
   - Artifacts are retained for 90 days
   - Download when needed for debugging

3. **Use secure storage:**
   - Store exports in encrypted S3 buckets
   - Use restricted access IAM policies
   - Enable versioning for audit trail

### Why This Demo Includes Them

This is a **demo repository** using a **non-production preview tenant** (myorg.oktapreview.com):
- No customer data
- No production systems
- Used for testing and demonstration
- Useful for others learning the import process

**If you fork this for production use:** Remove these files and add `imports/` to your `.gitignore`.

## Usage

### View Import Data
```bash
# View entitlement bundles
cat environments/myorg/imports/entitlements.json | jq '.entitlementBundles[]'

# View access reviews
cat environments/myorg/imports/reviews.json | jq '.reviewDefinitions[]'
```

### Re-import from Okta
```bash
# Import fresh data (overwrites these files)
gh workflow run import-all-resources.yml \
  -f tenant_environment=MyOrg \
  -f update_terraform=true \
  -f commit_changes=true
```

## File Lifecycle

1. **Import workflow runs** → Fetches data from Okta API
2. **Generates JSON files** → Saved to `imports/`
3. **Processes into Terraform** → Creates `.tf` files in `terraform/`
4. **Commits to repository** → (if `commit_changes=true`)

## Best Practices

### For Demo/Learning Environments
✅ Keep in repository for reference
✅ Document what data is included
✅ Use for learning and troubleshooting

### For Production Environments
❌ Do NOT commit to Git
✅ Use workflow artifacts (90-day retention)
✅ Store in secure, encrypted locations
✅ Implement access controls
✅ Regular cleanup of old exports

## Related Documentation

- [Import All Resources Workflow](../../.github/workflows/import-all-resources.yml)
- [GitOps Workflow Guide](../../docs/GITOPS_WORKFLOW.md)
- [API Management](../../docs/API_MANAGEMENT.md)
